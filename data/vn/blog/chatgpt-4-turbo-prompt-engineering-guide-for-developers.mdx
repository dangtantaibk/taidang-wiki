---
title: 'ChatGPT-4 prompt engineering cho developer' 
date: '2023-12-31'
tags: ['prompt-engineering']
draft: false
summary: 'Blog này sẽ khám phá tìm năng của ChatGPT-4 và Large Language Models trong việc phát triển phần mềm, 
Tập trung vào prompt engineering, ứng dụng thực tế, và tích hợp GPT-4 Turbo với Python cho các giải pháp đổi mới.'
images: ['/static/images/logo.jpg']
authors: ['default']
---
import Twemoji from './Twemoji.tsx'

![thumbnail-image](/static/images/chatgpt-4-prompt.png)

## Giới thiệu
Chào mừng bạn đến với blog "ChatGPT-4 Prompt Engineering cho Developers". Trong blog này, tôi rất vui được đưa bạn tới thế giới phức tập và không ngừng đổi mới của Large Language Models (LLMs), đặc biệt tập trung vào những ứng dụng của nó trong software development và đổi mới sản phẩm.

Tôi háo hức được giới thiệu về khái niệm của instruction-tuned LLMs. Không giống như phiên bản base LLMs được đào tạo để dự đoán từ tiếp theo trong một chuỗi câu, intruction-tuned LLMs được chế tạo để theo các chỉ dẫn đặc biệt, làm cho chúng phù hợp hơn với các ứng dụng thực tế. Tính khác nhau này là thiết yếu cho các developers, những người sử dụng LLMs nhằm mục đích đạt được các kết quả và hiệu quả trong các ứng dụng phần mềm của họ.

Trong blog này, tôi sẽ khám phá một loạt các trường hợp sử dụng LLM, trong đó bao gồm tóm tắt văn bản, sự suy luận, sự tiến hoá, sự mở rộng, và kể cả xây dựng chatbots bằng LLMs. Mục tiêu của tôi là khơi gợi lại trí tưởng tượng của bạn và truyền cảm hứng cho bạn có thể xây dựng các ứng dụng sáng tạo bằng LLMs APIs.

Prompt engineering, trong ngữ cảnh này, vừa là nghệ thuật và vừa là một môn khoa học. Nó yêu cầu sự rõ ràng và cụ thể trong yêu cầu của bạn, tương tự như việc hướng dẫn một cá nhân có hiểu biết, có kiến thức nhưng lại không nhận được nhiệm vụ cụ thể. Hiệu quả của phản hồi từ LLM phụ thuộc rất nhiều vào mức độ chính xác của các prompt của bạn.

Vì vậy, để chuẩn bị đi sâu hơn vào thế giới của LLMs. Tôi sẽ cung cấp cho bạn với các kỹ năng cần thiết và kiến thức đủ để tận dụng những tiềm năng của chúng. Cho dù bạn là một developer đang muốn tích hợp những mô hình này vào ứng dụng của bạn hay là một người đam mê, muốn tìm hiểu hơn về tương lại của AI trong phát triển phần mềm, blog này được thiết kế để phù hợp cho cả nghề nghiệp và cá nhân của bạn. Hãy cùng nhau bắt đầu cuộc hành trình khai sáng này.

## Hướng dẫn
Trong phần này, chúng ta sẽ luyện tập với 2 Nguyên tắc của prompt và những chiến thuật liên quan của nó để viết prompt hiệu quả cho large language models.

### Setup
Load OpenAI_API_KEY và các thư viện python liên quan.

``` python
import openai
import os

from dotenv import load_dotenv, find_dotenv
_ = load_dotenv(find_dotenv())

openai.api_key  = os.getenv('OPENAI_API_KEY')
```
### helper function
Xuyên suốt blog này, chúng ta sẽ sử dụng OpenAI's gpt-4-1106-preview model và [the chat completions endpoint](https://platform.openai.com/playground?mode=chat&model=gpt-4-1106-preview).

Đây là function giúp cho việc sử dụng các prompts trở nên dễ dàng hơn và xem các outputs được tạo ra.
``` python
def get_completion(prompt, model="gpt-3.5-turbo"):
    messages = [{"role": "user", "content": prompt}]
    response = openai.ChatCompletion.create(
        model=model,
        messages=messages,
        temperature=0, # Đây là thông số điều chỉnh mức độ ngẫu nhiên đầu ra của model
    )
    return response.choices[0].message["content"]
```

**Ghi chú:** Tất cả notebooks trong blog này đề sử dụng thư viện OpenAI với version `0.27.0`

Để sử dụng thư viện OpenAI version `1.0.0`. đây là code để bạn có thể thay thế function `get_completion`:

``` python 
client = openai.OpenAI()

def get_completion(prompt, model="gpt-3.5-turbo"):
    messages = [{"role": "user", "content": prompt}]
    response = client.chat.completions.create(
        model=model,
        messages=messages,
        temperature=0
    )
    return response.choices[0].message.content
```

### Nguyên tắc của Prompting
1. ***Nguyên tắc 1: Viết hướng dẫn rõ ràng và cụ thể***
2. ***Nguyên tắc 2: Cho model thời gian để “suy nghĩ”*** 

### Nguyên tắc 1: Viết hướng dẫn rõ ràng và cụ thể
**Chiến thuật 1: Sử dụng dấu phân cách để chỉ rõ các phần riêng biệt của input**
- Dấu phân cách có thể là bất kỳ thứ gì giống như: ```, """, < >, \<tag> \</tag>, :
``` python
text = f"""
Bạn nên thể hiện những gì bạn muốn một model thực hiện bằng cách cung cấp các hướng dẫn rõ ràng và cụ thể nhất. \
Điều này sẽ hướng dẫn model hướng tới đầu ra mong muốn, và giảm tỉ lệ nhận được các phản hồi không liên quan hoặc không chính xác. Đừng nhầm lẫn giữa việc viết prompt rõ ràng với việc viết prompt ngắn gọn. \
Trong nhiều trường hợp, prompts dài đầy đủ cung cấp nhiều sự rõ ràng và bối cảnh cho model hơn, thứ mà có thể dẫn đến kết quả đầu ra chi tiết và liên quan hơn.
"""
prompt = f"""
Tóm tắt văn bản được ngăn cách bằng 3 dấu nháy thành một câu độc lập.
```{text}```
"""
response = get_completion(prompt)
print(response)
```

<details>
  Cung cấp hướng dẫn rõ ràng và cụ thể nhất để model hiểu yêu cầu và tránh nhận phản hồi không liên quan hoặc không chính xác. Không nhầm lẫn giữa việc viết prompt rõ ràng và viết prompt ngắn gọn. Prompts dài đầy đủ cung cấp nhiều bối cảnh và có thể dẫn đến kết quả đầu ra chi tiết và liên quan hơn.
</details>

**Chiến thuật 2: Hỏi với yêu cầu một output có cấu trúc**
- JSON, HTML
``` python
prompt = f"""
Tạo ra 1 danh sách gồm 3 phần tử tự tạo bao gồm: Tên sách, tác giả và thể loại.
Cung cấp chúng ở định dạng JSON với các key như sau: book_id, title, author, genre.
"""
response = get_completion(prompt)
print(response)
```
<details>
```
[
  {
    "book_id": 1,
    "title": "Harry Potter and the Sorcerer's Stone",
    "author": "J.K. Rowling",
    "genre": "Fantasy"
  },
  {
    "book_id": 2,
    "title": "To Kill a Mockingbird",
    "author": "Harper Lee",
    "genre": "Fiction"
  },
  {
    "book_id": 3,
    "title": "1984",
    "author": "George Orwell",
    "genre": "Dystopian"
  }
]
```
</details>

**Chiến thuật 3: Yêu cầu model kiểm tra các điều kiện có thoả mãn.**
``` python
text_1 = f"""
Tạo ra một tách trà thật đơn giản| Đầu tiên, bạn cần đun sôi một ít nước. Trong khi đang đun nước, lấy một cái cốc và đặt một túi trà vào trong đó. Khi nước đủ nóng, chỉ cần đổ nước lên túi trà. \
Chúng ta hãy chờ một tí để trà có thể ngấm sâu hơn. Sau đó một vài phút, lấy túi trà ra khỏi. Nếu thích, bạn có thể thêm một ít đường hoặc sữa cho vừa miệng. \
Và thế là xong! Bạn đã có cho mình một tách trà thơm ngon để thưởng thức.
"""
prompt = f"""
Bạn sẽ được cung cấp văn bản được phân tách bằng 3 dấu nháy.
Nếu nó chứa một đoạn hướng dẫn, hãy viết lại các hướng dẫn đó theo định dạng bên dưới:

Bước 1 - ...
Bước 2 - …
…
Bước N - …

Nếu văn bản không chứa bất kỳ đoạn hướng dẫn nào, chỉ cần viết \"Không có bước nào được cung cấp.\"

\"\"\"{text_1}\"\"\"
"""
response = get_completion(prompt)
print("Các bước của văn bản 1:")
print(response)
```
<details>
- Các bước của văn bản 1:
    - Bước 1 - Đun sôi một ít nước.
    - Bước 2 - Lấy một cái cốc và đặt một túi trà vào trong đó.
    - Bước 3 - Đổ nước sôi lên túi trà.
    - Bước 4 - Chờ một tí để trà có thể ngấm sâu hơn.
    - Bước 5 - Sau đó một vài phút, lấy túi trà ra khỏi cốc.
    - Bước 6 - (Tùy chọn) Thêm một ít đường hoặc sữa cho vừa miệng.
    - Bước 7 - Thưởng thức tách trà thơm ngon của bạn.
</details>
**Chiến thuật 4: "Few-shot" prompting**
``` python 
prompt = f"""
Nhiệm vụ của bạn là trả lời trong 1 phong cách nhất quán.

<Cháu>: Dạy cháu về sự kiên nhẫn.

<Bà ngoại>: Con sông tạo nên một thung lũng sâu nhất, nó được tạo nên từ một con suối nhỏ bé; \
Bản giao hưởng vĩ đại nhất cũng được bắt nguồn từ một nốt nhạc duy nhất; \
Một tấm thảm phức tạp nhất cũng bắt đầu bằng một sợi chỉ đơn độc.

<Cháu>: Dạy cháu về sự kiên cường.
"""
response = get_completion(prompt)
print(response)
```
<details>
- \<Bà ngoại\>: Sự kiên cường không phải là một phẩm chất tự nhiên, mà nó được hình thành từ những thử thách và khó khăn trong cuộc sống. 
Như con sông tạo nên một thung lũng sâu nhất từ một con suối nhỏ bé, sự kiên cường cũng được xây dựng từ những bước tiến nhỏ nhặt và những nỗ lực không ngừng nghỉ. 
Giống như bản giao hưởng vĩ đại nhất bắt nguồn từ một nốt nhạc duy nhất, sự kiên cường cũng bắt đầu từ những quyết định và hành động nhỏ nhặt. 
Và giống như một tấm thảm phức tạp nhất bắt đầu bằng một sợi chỉ đơn độc, sự kiên cường cũng bắt đầu từ sự kiên nhẫn và kiên trì trong mỗi bước đi. 
Hãy nhớ rằng sự kiên cường không phải là một phẩm chất mà chúng ta có sẵn, mà nó là một kỹ năng mà chúng ta có thể rèn luyện và phát triển thông qua sự kiên nhẫn và quyết tâm.
</details>

Nguyên tắc 2: Cho model thời gian để “suy nghĩ”
**Chiến thuật 1: Định nghĩa rõ ràng từng bước để hoàn thành nhiệm vụ.**
``` python 
text = f"""
Ở một ngôi làng quyến rũ, anh em nhà Jack và Jill bắt đầu thực hiện nhiệm vụ lấy nước từ một cái giếng trên đỉnh đồi. Khi họ đang leo lên, họ ca hát vui vẻ, 
một bất ngờ ập đến, Jack vấp phải hoàn đá và ngã nhào xuống đồi, với Jill theo sau. Mặc dù bị bầm dập, nhưng cặp đôi vẫn trở về nhà được an toàn. \
Bất chấp sự cố, tinh thần phiêu lưu của họ vẫn không hề suy giảm, và họ tiếp tục khám phá với niềm yêu thích của mình.
"""
# Ví dụ 1
prompt_1 = f"""
Thực hiện các hành động sau:
1 - Tóm tắt lại văn bản được phân tách bằng 3 dấu nháy thành 1 câu đầy đủ ý.
2 - Dịch bản tóm tắt ra tiếng Anh.
3 - Liệt kê mỗi tên trong bản tóm tắt tiếng Anh này.
4 - Cho ra output là một json object chứa các từ khoá sau: eng_summary, num_names.

Tách câu trả lời của bạn bằng dấu xuống dòng.

Văn bản:
```{text}```
"""
response = get_completion(prompt_1)
print("Hoàn thành cho prompt 1:")
print(response)
```
<details>
Hoàn thành cho prompt 1:
1 - Tóm tắt lại văn bản: Anh em nhà Jack và Jill ở một ngôi làng quyến rũ bắt đầu lấy nước từ cái giếng trên đồi. Khi đang leo lên, Jack vấp phải hoàn đá và ngã xuống đồi, Jill theo sau. Mặc dù bị bầm dập, cả hai vẫn trở về nhà an toàn và tiếp tục khám phá với niềm yêu thích của mình.

2 - Translation: Jack and Jill, siblings from a charming village, start fetching water from a well on top of a hill. While climbing up, Jack trips over a rock and falls down the hill, with Jill following. Despite being bruised, the pair safely returns home and continues their exploration with their enthusiasm undiminished.

3 - List of names: Jack, Jill

4 - Output: 
``` JSON
{
  "eng_summary": "Jack and Jill, siblings from a charming village, start fetching water from a well on top of a hill. While climbing up, Jack trips over a rock and falls down the hill, with Jill following. Despite being bruised, the pair safely returns home and continues their exploration with their enthusiasm undiminished.",
  "num_names": 2
}
```

</details>

**Yêu cầu câu trả lời với một định dạng cụ thể**
```python 
prompt_2 = f"""
Nhiệm vụ của bạn là thực hiện các hành động sau:
1 - Tóm tắt văn bản được ngăn cách bởi <> với 1 câu.
2 - Dịch đoạn tóm tắt này bằng tiếng Anh.
3 - Liệt kê mỗi tên riêng trong đoạn tóm tắt bằng tiếng Anh.
4 - Output là một json object chưa các key sau: eng_summary, num_names.

Sử dụng định dạng sau:
Văn bản: <văn bản cần tóm tắt>
Tóm tắt: <câu tóm tắt>
Dịch: <câu tóm tắt sau khi dịch>
Những cái tên: <Danh sách những cái tên trong câu tóm tắt>
Output JSON: <json với eng_summary và num_names>

Văn bản: <{text}>
"""
response = get_completion(prompt_2)
print("\nHoàn thành cho prompt 2:")
print(response)
```
<details>
Hoàn thành cho prompt 2:
Văn bản: Ở một ngôi làng quyến rũ, anh em nhà Jack và Jill bắt đầu thực hiện nhiệm vụ lấy nước từ một cái giếng trên đỉnh đồi. Khi họ đang leo lên, họ ca hát vui vẻ, một bất ngờ ập đến, Jack vấp phải hoàn đá và ngã nhào xuống đồi, với Jill theo sau. Mặc dù bị bầm dập, nhưng cặp đôi vẫn trở về nhà được an toàn. Bất chấp sự cố, tinh thần phiêu lưu của họ vẫn không hề suy giảm, và họ tiếp tục khám phá với niềm yêu thích của mình.

Tóm tắt: 
Anh em nhà Jack và Jill ở một ngôi làng quyến rũ bắt đầu nhiệm vụ lấy nước từ một cái giếng trên đỉnh đồi. Khi leo lên, Jack vấp phải hoàn đá và ngã xuống đồi, Jill theo sau. Mặc dù bị bầm dập, cả hai vẫn trở về nhà an toàn và tiếp tục khám phá với niềm yêu thích của mình.

Dịch: 
Jack and Jill, siblings from a charming village, embark on a mission to fetch water from a well atop a hill. As they climb, they sing happily, but an unexpected incident occurs - Jack trips on a rock and tumbles down the hill, with Jill following suit. Despite their bruises, the duo safely returns home and continues their exploration with undiminished adventurous spirit.

Những cái tên: Jack, Jill

JSON: 
``` JSON
{
  "eng_summary": "Jack and Jill, siblings from a charming village, embark on a mission to fetch water from a well atop a hill. As they climb, they sing happily, but an unexpected incident occurs - Jack trips on a rock and tumbles down the hill, with Jill following suit. Despite their bruises, the duo safely returns home and continues their exploration with undiminished adventurous spirit.",
  "num_names": 2
}
```
</details>
**Chiến thuật 2: Hướng dẫn cho model tìm ra giải pháp riêng của mình trước khi vội vàng đưa ra kết luận.**

```python 
prompt = f"""
Xác định xem bài giải của học sinh có đúng hay không.

Câu hỏi: 
Tôi đang xây dựng một hệ thống lắp đặt năng lượng mặt trời và tôi cần giúp về vấn đề tài chính.
- Chi phí đất 100$ / mét vuông
- Tôi có thể mua tấm năng lượng mặt trời cho 250$ / mét vuông
- Tôi đàm phán một hợp đồng cho việc bảo trì, nó sẽ tiêu tốn của tôi 100 nghìn đô mỗi năm, và thêm 10$ / mét vuông
Tổng chi phí cho năm hoạt động đầu tiên tính trên mét vuông là bao nhiêu?

Bài giải của học sinh:
Đặt x là kích thước của phần lắp đặt, tính bằng mét vuông.
Chi phí:
1. Chi phí đất: 100x
2. Chi phí tấm pin năng lượng mặt trời: 250x
3: Tổng tiền chi phí bảo hành: 100,000 + 100x
Tổng chi phí: 100x + 250x + 100,000 + 100x = 450x + 100,000
"""
response = get_completion(prompt)
print(response)
```
<details>
- Bài giải của học sinh là chính xác. Tổng chi phí cho năm hoạt động đầu tiên tính trên mét vuông là 450x + 100,000.
</details>
**Ghi chú:** Bài giải của học sinh thì không đúng. Chúng ta sẽ fix nó bằng cách hướng dẫn model tìm ra giải pháp của cho mình trước.

```python 
prompt = f"""
Nhiệm vụ của bạn là xác định xem bài giải của nhân viên là đúng hay sai.
Để giải quyết bài toán này, hay theo các hướng dẫn sau:
- Đầu tiên, tìm ra lời giải cho bài toán của bạn, bao gồm cả chi phí cuối cùng.
- Sau đó so sánh lời giải của bạn với bài giải của học sinh và đánh giá bài giải của học sinh là đúng hay sai.
Không quyết định bài giải của học sinh là đúng hay sai cho đến khi bạn có đáp án của riêng mình.

Sử dụng định dạng như sau:
Câu hỏi:
đây là câu hỏi

Bài giải của học sinh:
đây là bài giải của học sinh

Bài giải thực tế:
từng bước để làm ra lời giải và kết quả của bạn

Bài giải của học sinh có giống với bài giải của bạn vừa tính không:
có hoặc không

Bài giải học sinh:
đúng hoặc không đúng

Câu hỏi:
Tôi đang xây dựng một hệ thống lắp đặt năng lượng mặt trời và tôi cần giúp về vấn đề tài chính.
- Chi phí đất 100$ / mét vuông
- Tôi có thể mua tấm năng lượng mặt trời cho 250$ / mét vuông
- Tôi đàm phán một hợp đồng cho việc bảo trì, nó sẽ tiêu tốn của tôi 100 nghìn đô mỗi năm, và thêm 10$ / mét vuông
Tổng chi phí cho năm hoạt động đầu tiên tính trên mét vuông là bao nhiêu?

Bài giải của học sinh:
Đặt x là kích thước của phần lắp đặt, tính bằng mét vuông.
Chi phí:
1. Chi phí đất: 100x
2. Chi phí tấm pin năng lượng mặt trời: 250x
3: Tổng tiền chi phí bảo hành: 100,000 + 100x
Tổng chi phí: 100x + 250x + 100,000 + 100x = 450x + 100,000

Bài giải thực tế:
"""
response = get_completion(prompt)
print(response)
```
<details>
Để giải quyết bài toán này, ta sẽ tiến hành tính toán từng phần chi phí và so sánh với bài giải của học sinh.

Câu hỏi:
Tính tổng chi phí cho năm hoạt động đầu tiên của hệ thống lắp đặt năng lượng mặt trời, dựa trên mét vuông.

Bài giải của học sinh:
Đặt x là kích thước của phần lắp đặt, tính bằng mét vuông.


Chi phí:
Chi phí đất: 100x
Chi phí tấm pin năng lượng mặt trời: 250x
Tổng tiền chi phí bảo hành: 100,000 + 10x
Tổng chi phí: 100x + 250x + 100,000 + 10x = 360x + 100,000


Bài giải thực tế:
Chi phí đất: 100$ / mét vuông.
Chi phí tấm năng lượng mặt trời: 250$ / mét vuông.
Chi phí bảo trì: 100,000$ / năm + 10$ / mét vuông.
Tổng chi phí bảo trì cho x mét vuông = 100,000 + 10x.
Tổng chi phí cho x mét vuông cho năm đầu tiên = Chi phí đất + Chi phí tấm năng lượng mặt trời + Chi phí bảo trì
= (100x) + (250x) + (100,000 + 10x)
= 100x + 250x + 100,000 + 10x
= 360x + 100,000.

Bài giải của học sinh có giống với bài giải của bạn vừa tính không: Không

Bài giải học sinh: Không đúng

Lý do: Bài giải của học sinh đã nhầm lẫn trong việc tính tổng chi phí bảo trì, họ đã tính 100x thay vì 10x.
</details>

## Lặp đi lặp lại
Trong phần này, chúng ta sẽ phân tích lặp đi lặp lại và tinh chỉnh prompt của bạn để tạo bản sao tiếp thị từ một bảng thông tin sản phẩm.
### Tạo ra một bản mô tả sản phẩm tiếp thị từ một bảng thông tin sản phẩm
``` python
fact_sheet_chair = """
TỔNG QUAN
- MỘt phần của vẻ đẹp về nội thất văn phòng lấy cảm hứng của giữa thế kỷ trước, 
bao gồm tủ hồ sơ, bàn làm việc, tủ sách, bàn họp, và nhiều hơn nữa.
- Một số lựa chọn về màu và các hoàn thiện cơ bản.
- Có sẵn với đồ bọc bằng nhựa mặt trước và mặt sau (SWC-100) 
hoặc bọc toàn bộ (SWC-110) với 10 lựa chọn với vải và 6 lựa chọn với da.
- Các tuỳ chọn chất liệu hoàn thiện cơ bản: thép không gỉ, đen mờ, 
màu trắng bóng hoặc chrome.
- Ghế có sẵn với loại: có tay vịn hoặc không có tay vịn.
- Phù hợp cho nhà ở hoặc văn phòng kinh doanh.
- Đủ điều kiện để có thể làm hợp đồng.

CHẾ TẠO
- 5 - bánh xe đế nhôm bọc nhựa.
- Ghế được điều chỉnh bằng khí nén giúp nâng / hạ dễ dàng.

KÍCH THƯỚC
- CHIỀU RỘNG 53 CM | 20.87"
- CHIỀU SÂU 51 CM | 20.08"
- CHIỀU CAO 80 CM | 31.50"
- CHIỀU CAO CỦA GHẾ NGỒI 44 CM | 17.32"
- CHIỀU SÂU CỦA GHẾ NGỒI 41 CM | 16.14"

CÁC TUỲ CHỌN KHÁC
- Tuỳ chọn bánh xe với sàn mềm hoặc sàn cứng.
- Có 2 lựa chọn cho mật độ bọt ghế: trung bình (1.8 lb/ft3) hoặc cao (2.8 lb/ft3)
- Không có tay hoặc Tay vịn PU với 8 vị trí.

NGUYÊN VẬT LIỆU
PHẦN VỎ
- Nhôm đúc với lớp phủ Nylon PA6/PA66 đã được cải tiến
- Độ dày vỏ: 10 mm.
GHẾ
- Bọt HD36

NƯỚC XUẤT XƯỞNG
- Italy
"""
```

``` python
prompt = f"""
Nhiệm vụ của bạn là giúp cho team Marketing tạo ra mô tả cho trang web bán lẻ của sản phẩm dựa trên một bảng thông tin kỹ thuật.

Viết một mô tả sản phẩm dựa trên những thông tin đã được cung cấp trong thông số kỹ thuật được phân tách bằng dấu ```

Thông số kỹ thuật: ```{fact_sheet_chair}```
"""
response = get_completion(prompt)
print(response)
```
<details>
Mô tả sản phẩm:

Sản phẩm là một phần của vẻ đẹp nội thất văn phòng lấy cảm hứng từ thế kỷ trước. Bộ sản phẩm bao gồm tủ hồ sơ, bàn làm việc, tủ sách, bàn họp và nhiều hơn nữa, tạo nên một không gian làm việc chuyên nghiệp và sang trọng.

Sản phẩm có sẵn với nhiều lựa chọn về màu sắc và hoàn thiện cơ bản. Có thể chọn sản phẩm với đồ bọc nhựa mặt trước và mặt sau hoặc bọc toàn bộ với nhiều lựa chọn về vải và da. Chất liệu hoàn thiện cơ bản bao gồm thép không gỉ, đen mờ, màu trắng bóng hoặc chrome.

Ghế đi kèm với sản phẩm có thể có tay vịn hoặc không có tay vịn, tùy thuộc vào sở thích và nhu cầu của khách hàng. Sản phẩm phù hợp cho cả nhà ở và văn phòng kinh doanh, đáp ứng đủ điều kiện để có thể làm hợp đồng.

Sản phẩm được chế tạo với 5 bánh xe đế nhôm bọc nhựa, giúp di chuyển dễ dàng. Ghế có thể điều chỉnh bằng khí nén, giúp nâng và hạ dễ dàng.

Kích thước của sản phẩm là chiều rộng 53 cm, chiều sâu 51 cm và chiều cao 80 cm. Chiều cao của ghế ngồi là 44 cm và chiều sâu của ghế ngồi là 41 cm.

Sản phẩm còn có các tuỳ chọn khác như bánh xe với sàn mềm hoặc sàn cứng, mật độ bọt ghế trung bình hoặc cao, và có thể chọn không có tay hoặc tay vịn PU với 8 vị trí.

Phần vỏ của sản phẩm được làm từ nhôm đúc với lớp phủ Nylon PA6/PA66 đã được cải tiến, đảm bảo độ bền và chất lượng. Độ dày vỏ là 10 mm. Ghế được làm từ bọt HD36, mang lại sự thoải mái và hỗ trợ tối đa cho người sử dụng.

Sản phẩm được xuất xưởng từ Italy, đảm bảo chất lượng và thiết kế tinh tế.
</details>
### Vấn đề 1: Văn bản thì quá dài
- Giới hạn số lượng từ/câu/ký tự.
``` python
prompt = f"""
Nhiệm vụ của bạn là giúp cho team Marketing tạo ra một mô tả cho trang web bán lẻ của một sản phẩm dựa trên một bảng thông tin kỹ thuật.

Viết một mô tả sản phẩm dựa trên những thông tin được cung cấp trong mô tả kỹ thuật được phân tách bằng dấu ```

Sử dụng tối đa 50 từ.

Thông số kỹ thuật: ```{fact_sheet_chair}```
"""
response = get_completion(prompt)
print(response)
```
<details>
Mô tả sản phẩm:

Một phần của vẻ đẹp về nội thất văn phòng lấy cảm hứng từ thế kỷ trước, sản phẩm bao gồm tủ hồ sơ, bàn làm việc, tủ sách, bàn họp và nhiều hơn nữa. Có sẵn với đồ bọc bằng nhựa mặt trước và mặt sau hoặc bọc toàn bộ với nhiều lựa chọn về vải và da. Có các tuỳ chọn về màu sắc và hoàn thiện cơ bản. Ghế có thể điều chỉnh bằng khí nén giúp nâng/hạ dễ dàng. Kích thước sản phẩm là 53cm chiều rộng, 51cm chiều sâu và 80cm chiều cao. Sản phẩm phù hợp cho nhà ở hoặc văn phòng kinh doanh và đủ điều kiện để có thể làm hợp đồng.

</details>

### Vấn đề 2. Văn bản tập trong vào các chi tiết sai
- Yêu cầu model tập trung vào các khía cạnh liên quan đến người đọc mục tiêu.
``` python 
prompt = f"""
Nhiệm vụ của bạn là giúp cho team marketing tạo ra một mô tả cho trang web bán lẻ của một sản phẩm dựa trên một bảng thông tin kỹ thuật.

Viết một mô tả sản phẩm dựa trên những thông tin được cung cấp trong mô tả kỹ thuật được phân tách bằng dấu ```

Mô tả tập trung vào nhà bán lẻ đồ nội thất, vì vậy nên mang tính chất kỹ thuật và tập trung vào chất liệu làm nên.

Kết thúc đoạn mô tả, thêm vào 7 ký tự Product ID có trong thông số kỹ thuật.

Sử dụng nhiều nhất 50 từ.

Thông số kỹ thuật: ```{fact_sheet_chair}```
"""
response = get_completion(prompt)
print(response)
```
<details>
Mô tả sản phẩm:

Mang đậm phong cách nội thất văn phòng thế kỷ trước, sản phẩm này bao gồm tủ hồ sơ, bàn làm việc, tủ sách, bàn họp và nhiều hơn nữa. Có sẵn với đồ bọc nhựa mặt trước và mặt sau hoặc bọc toàn bộ với nhiều lựa chọn với vải và da. Chất liệu hoàn thiện bao gồm thép không gỉ, đen mờ, màu trắng bóng hoặc chrome. Ghế có sẵn với tay vịn hoặc không tay vịn. Sản phẩm phù hợp cho cả nhà ở và văn phòng kinh doanh. Sản phẩm có đủ điều kiện để làm hợp đồng. Sản phẩm có kích thước chiều rộng 53cm, chiều sâu 51cm, chiều cao 80cm, chiều cao của ghế ngồi 44cm và chiều sâu của ghế ngồi 41cm. Có các tuỳ chọn khác như bánh xe với sàn mềm hoặc sàn cứng, mật độ bọt ghế trung bình hoặc cao và tay vịn PU với 8 vị trí. Vỏ sản phẩm được làm từ nhôm đúc với lớp phủ Nylon PA6/PA66 đã được cải tiến, độ dày vỏ là 10mm. Ghế được làm từ bọt HD36. Sản phẩm được sản xuất tại Italy.

Product ID: SWC-100
</details>

### Vấn đề 3. Mô tả cần một bảng kích thước
- Yêu cầu model trích xuất thông tin và tổ chức nó trong một bảng.
``` python
prompt = f"""
Nhiệm vụ của bạn là giúp cho team marketing tạo ra một mô tả cho trang web bán lẻ của một sản phẩm dựa trên một bảng thông tin kỹ thuật.

Viết một mô tả sản phẩm dựa trên những thông tin được cung cấp trong mô tả kỹ thuật được phân tách bằng dấu ```

Mô tả tập trung vào nhà bán lẻ đồ nội thất, vì vậy nên mang tính chất kỹ thuật và tập trung vào chất liệu làm nên.

Kết thúc đoạn mô tả, thêm vào 7 ký tự Product ID có trong thông số kỹ thuật.

Sau khi hoàn thành mô tả, thêm vào một bảng cung cấp kích thước của sản phẩm. Bảng này có 2 cột.
Trong cột thứ nhất, bao gồm tên của kích thước.
Trong cột thứ hai, bao gồm số đo, được tính bằng inch.

Đặt tiêu đề cho bảng là "Kích cỡ sản phẩm".

Định dạng mọi thứ dưới dạng HTML để có thể sử dụng trong một trang web.
Đặt mô tả trong một thẻ <div>

Mô tả kỹ thuật: ```{fact_sheet_chair}```
"""

response = get_completion(prompt)
print(response)
```

### Load Python libraries to view HTML
```python
from IPython.display import display, HTML
display(HTML(response))
```
<details>
  ![figure1](/static/images/prompt-1.png) 
</details>


## Tóm tắt
Trong chương này, bạn sẽ tóm tắt đoạn văn bản tập trung vào một chủ đề cụ thể.

### Văn bản để tóm tắt
``` python
prod_review = """
Nhận được món đồ chơi gấu trúc sang trọng này nhân dịp sinh nhật con gái tôi, nó đã rất thích và mang đi khắp nơi. Món đồ chơi mềm và rất dễ thương, mặt của nó thì trông rất thân thiện.
Tuy nhiên nó hơi nhỏ so với cái giá mà tôi đã trả. Tôi nghĩ rằng có nhiều lựa chọn khác lớn hơn với cùng mức giá này. Nó đã đến sớm hơn một ngày so với dự kiến, 
vì vậy tôi dã tự mình chơi với nó trước khi tôi tặng nó cho con gái của mình.
"""
```
### Tóm tắt với giới hạn 1 từ/câu/ký tự
``` python
prompt = f"""
Nhiệm vụ của bạn là tạo ra một bản tóm tắt ngắn của một review sản phẩm từ một trang thương mại điện tử.

Tóm tắt văn bản bên dưới, phân tách tới dấu ```. trong tối đa 30 từ. 

Review: ```{prod_review}```
"""

response = get_completion(prompt)
print(response)
```

<details>
  Món đồ chơi gấu trúc sang trọng, mềm mại và dễ thương. Nhỏ hơn mong đợi và có nhiều lựa chọn khác với cùng mức giá. Giao hàng nhanh.
</details>

### Tóm tắt tập trung vào vận chuyển và giao hàng
``` python
prompt = f"""
Nhiệm vụ của bạn là tạo ra một bản tóm tắt của một review sản phẩm trên một sàn thương mại điện tử để gửi feedback này tới phòng ban Vận chuyển.

Tóm tắt review bên dưới, phân tách bằng dấu ```, trong tối đa 30 từ, tập trung vào bất kỳ khía cạnh nào đề cập đến việc vận chuyển và giao sản phẩm.

Review: ```{prod_review}```
"""

response = get_completion(prompt)
print(response)
```
<details>
Món đồ chơi gấu trúc sang trọng này đã được giao sớm hơn dự kiến. Mặc dù nhỏ hơn so với giá trị, nó vẫn rất dễ thương và mềm mại.
</details>

### Tóm tắt tập trung vào giá tiền và giá trị mang lại

``` python
prompt = f"""
Nhiệm vụ của bạn là tạo ra một đoạn tóm tắt ngắn cho 1 review sản phẩm từ một sàn thương mại điện tử để đưa ra nhận xét cho phòng định giá, chịu trách nhiệm xác định giá thành sản phẩm.

Tóm tắt review bên dưới, được phân cách bằng dấu ```, trong nhiều nhất 30 từ, và tập trung vào bất kỳ khía cạnh nào đề cập đến giá và giá trị được cảm nhận. 

Review: ```{prod_review}```
"""

response = get_completion(prompt)
print(response)

```
<details>
Món đồ chơi gấu trúc sang trọng này được đánh giá cao về tính đáng giá và giá trị. Mặc dù nhỏ hơn so với giá trị trả, nó vẫn là một món đồ chơi mềm và dễ thương. Giao hàng nhanh hơn dự kiến, cho phép người mua thưởng thức trước khi tặng.
</details>

### Bình luận
Tóm tắt bao gồm các chủ đề không liên quan đến chủ đề trọng tâm.

### Thử dùng "trích xuất" thay cho "tóm tắt"
``` python
prompt = f"""
Nhiệm vụ của bạn là trích xuất những thông tin liên quan từ một review sản phẩm từ một sàn thương mại điện tử để đưa ra nhận xét cho phòng vận chuyển.

Từ review bên dưới, được phân cách bằng dấu ```, trích xuất thông tin liên quan đến vận chuyển và giao hàng. Giới hạn trong 30 từ.

Review: ```{prod_review}```
"""

response = get_completion(prompt)
print(response)
```
<details>
Thông tin liên quan đến vận chuyển và giao hàng từ review trên là:

- Nó đã đến sớm hơn một ngày so với dự kiến.
</details>

### Tóm tắt nhiều review sản phẩm
``` python
review_1 = prod_review 

# review cho một chiếc đèn đứng
review_2 = """
Cần một chiếc đèn đẹp cho phòng ngủ của tôi, và cái này có thêm ngăn chứa đồ và mức giá lại không quá cao. Nhận được nhanh chóng - đến trong 2 ngày. Dây đèn bị đứt trong quá trình vận chuyển và công ty \
đã vui vẻ gửi lại một cái mới. Cũng đến trong một vài ngày. Lắp đặt nó thì dễ dàng. Sau đó tôi đã thiếu mất một bộ phận phụ trợ, vì vậy tôi đã liên hệ với bộ phận hỗ trợ và họ đã nhanh chóng gửi cho tôi phần còn thiếu! Đối với tôi \
đây là một công ty tuyệt vời, quan tâm đến khách hàng và sản phẩm của họ.
"""

# review cho một bàn chải đánh răng điện 
review_3 = """
Chuyên gia vệ sinh răng miệng của tôi đã khuyên tôi dùng bàn chải đánh răng điện, đó là lý do tại sao tôi lại mua cái này. Thời lượng pin có vẻ khá ấn tượng cho đến nay. Sau lần sạc đầu tiên và \
cắm bộ sạc trong tuần để điều hoà pin, tôi đã rút sạc và sử dụng nó hai lần mỗi ngày trong 3 tuần qua cho đến lần sạc cuối cùng \
Nhưng đầu bàn chải đánh răng thì quá nhỏ. Tôi đã thấy bàn chải đánh răng dành cho trẻ em còn lớn hơn cái này. Tôi ước đầu của nó to hơn với \
sự khác nhau của các lông bàn chải đánh răng đển len vào giữa các răng tốt hơn nhưng cái này thì không có. Nhìn chung, nếu bạn có thể mua được cái này ở mức giá 50 đô, thì nó là một mức giá tốt. \
Đầu thay thế của nó khá đắt nhưng bạn có thể mua những đầu chung khác với mức giá hợp lý hơn. Bàn chải đánh răng này khiến tôi có cảm giác rằng mình đến nha sĩ mỗi ngày. Răng của tôi cảm thấy sạch bóng!
"""

# review cho một máy xay
review_4 = """
Vì vậy, họ vẫn có hệ thống 17 sản phẩm được bán theo mùa với giá khoảng 49 đô la trong tháng 11, giảm khoảng một nửa, nhưng vì lý do nào đó (gọi đó là tăng giá) \
vào khoảng tuần thứ hai của tháng 12, giá tất cả đều tăng lên khoảng từ $70-$89 cho cùng một hệ thống. Và hệ thống 11 mảnh đã tăng khoảng $10 hoặc \
vì vậy giá cũng so với giá bán trước đó là $29. Vì vậy nhìn thì có vẻ ổn, nhưng nếu nhìn vào phần đế thì thấy phần lưỡi dao khóa vào vị trí trông không đẹp bằng \
như trong các phiên bản trước từ vài năm trước, nhưng tôi dự định sẽ rất nhẹ nhàng với nó (ví dụ: tôi nghiền nát những món rất cứng như đậu, đá, gạo, v.v. trong \
trước tiên hãy xay máy xay sinh tố, sau đó nghiền thành bột theo khẩu phần tôi muốn trong máy xay, sau đó chuyển sang lưỡi đánh bông để có bột mịn hơn và sử dụng lưỡi cắt chéo \
trước tiên khi làm sinh tố, sau đó sử dụng lưỡi dao phẳng nếu tôi cần mịn hơn/ít giòn hơn). Mẹo đặc biệt khi làm sinh tố, cắt nhuyễn và đông lạnh các loại trái cây và \
rau (nếu dùng rau bina-hầm nhẹ rau bina mềm rồi đông lạnh cho đến khi sẵn sàng sử dụng-và nếu làm kem hấp, hãy sử dụng máy chế biến thực phẩm cỡ nhỏ đến vừa) \
mà bạn dự định sử dụng theo cách đó, bạn có thể tránh thêm quá nhiều đá nếu có khi làm sinh tố. Sau khoảng một năm, động cơ phát ra tiếng động buồn cười. \
Tôi đã gọi cho bộ phận chăm sóc khách hàng nhưng đã hết bảo hành nên tôi phải mua cái khác. FYI: Chất lượng tổng thể đã được cải thiện ở những loại sản phẩm này, vì vậy \
họ đang dựa vào sự nhận diện thương hiệu và lòng trung thành của người tiêu dùng để duy trì doanh số bán hàng. Nhận được nó trong khoảng hai ngày.
"""

reviews = [review_1, review_2, review_3, review_4]
```

``` python
for i in range(len(reviews)):
    prompt = f"""
    Nhiệm vụ của bạn là tạo ra một đoạn tóm tắt ngắn của một review sản phẩm từ một sàn thương mại điện tử.

    Tóm tắt đoạn review bên dưới, được phân cách bởi dấu ```, trong nhiều nhất 20 từ.

    Review: ```{reviews[i]}```
    """

    response = get_completion(prompt)
    print(i, response, "\n")
```

<details>
0 Món đồ chơi gấu trúc sang trọng, mềm và dễ thương, nhưng hơi nhỏ so với giá trị. Giao hàng nhanh. 

1 Đèn đẹp, dung lượng lưu trữ lớn, giá hợp lý. Giao hàng nhanh, đổi mới khi bị hỏng. Hỗ trợ nhanh chóng, công ty tuyệt vời. 

2 Đánh giá bàn chải đánh răng điện: Chuyên gia khuyên dùng, pin tốt, đầu nhỏ, giá hợp lý, làm sạch răng tốt. 

3 Người đánh giá nhận thấy việc tăng giá sau đợt giảm giá đáng thất vọng và nhận thấy chất lượng giảm sút.
</details>

## Suy luận
Trong chương này, bạn sẽ ra ý kiến và chủ đề của các review sản phẩm và những bài báo thời sự.

### Văn bản review sản phẩm
``` python 
lamp_review = """
Cần một chiếc đèn đẹp cho phòng ngủ của tôi, và cái này có thêm ngăn chứa đồ và mức giá lại không quá cao. Nhận được nhanh chóng - đến trong 2 ngày. Dây đèn bị đứt trong quá trình vận chuyển và công ty \
đã vui vẻ gửi lại một cái mới. Cũng đến trong một vài ngày. Lắp đặt nó thì dễ dàng. Sau đó tôi đã thiếu mất một bộ phận phụ trợ, vì vậy tôi đã liên hệ với bộ phận hỗ trợ và họ đã nhanh chóng gửi cho tôi phần còn thiếu! Đối với tôi \
Lumina là một công ty tuyệt vời, quan tâm đến khách hàng và sản phẩm của họ.
"""
```

### Ý kiến (Tích cực / Tiêu cực)
``` python 
prompt = f"""
Ý kiến của đoạn review sản phẩm này là gì, đoạn review được ngăn cách bằng dấu ```?

Văn bản review: '''{lamp_review}'''
"""
response = get_completion(prompt)
print(response)
```

<details>
Ý kiến của đoạn review này là tích cực.
</details>

``` python

prompt = f"""
Ý kiến của đoạn review sản phẩm này là gì, đoạn review được ngăn cách bằng dấu ```?

Đưa ra câu trả lời với chỉ 1 từ, "Tích cực" hoặc "Tiêu cực".

Văn bản review: '''{lamp_review}'''
"""
response = get_completion(prompt)
print(response)
```

<details>Tích cực</details>

### Xác định các loại cảm xúc

``` Python
prompt = f"""
Xác định một danh sách các cảm xúc mà người viết bài review đang thể hiện. Bao gồm không quá 5 mục trong danh sách. Định dạng của câu trả lời của bạn dưới dạng 
các từ viết thường, được phân cách nhau bằng dấu phẩy.

Văn bản review: '''{lamp_review}'''
"""
response = get_completion(prompt)
print(response)
```
<details>
hạnh phúc, hài lòng, biết ơn, ấn tượng, hài lòng
</details>

### Xác định sự tức giận
``` python
prompt = f"""
Người viết bài đánh giá sau có bày tỏ sự tức giận không? Đánh giá được phân cách bằng ba dấu ```. Đưa ra câu trả lời của bạn là có hoặc không.

Review text: '''{lamp_review}'''
"""
response = get_completion(prompt)
print(response)
```
<details>
Không
</details>

### Trích xuất tên sản phẩm và tên công ty từ đánh giá của khách hàng
``` python
prompt = f"""
Xác định các mục sau đây từ bài đánh giá:
- Mặt hàng được người đánh giá mua.
- Công ty sản xuất mặt hàng đó.

Đánh giá được phân cách bằng 3 dấu ```. Định dạng câu trả lời của bạn dưới dạng JSON với "Item" và "Brand" là các keys.
Nếu như thông tin không có, sử dụng "unknown" là giá trị.
Làm cho câu trả lời của bạn ngắn nhất có thể.
  
Đoạn đánh giá: '''{lamp_review}'''
"""
response = get_completion(prompt)
print(response)
```

<details>
```
{
  "Item": "đèn",
  "Brand": "Lumina"
}
```
</details>

### Thực hiện nhiều tác vụ cùng một lúc
``` python
prompt = f"""
Xác định các mục sau đây từ bài review:
- Ý kiến (tích cực hoặc tiêu cực)
- Người đánh giá có thể hiện sự giận dữ (có hoặc không)
- Mặt hàng mà người đánh giá đã mua
- Tên công ty sản xuất mặt hàng này

Bài đánh giá được phân cách bằng 3 dấu ```. Định dạng của câu trả lời bạn là một JSON với "Sentiment", "Anger", "Item" và "Brand" như các từ khoá.
Nếu những thông tin nào không thể hiện, sử dụng giá trị là "unknown".
Làm cho câu trả lời của bạn ngắn nhất có thể.
Định dạng Sự tức dận với giá trị là một boolean.

Bài đánh giá: '''{lamp_review}'''
"""
response = get_completion(prompt)
print(response)
``` 

<details>
```
{
  "Sentiment": "Tích cực",
  "Anger": false,
  "Item": "đèn",
  "Brand": "Lumina"
}
```
</details>

### Suy luận về chủ đề nào đó
``` python
story = """
Trong một cuộc khảo sát gần đây do chính phủ thực hiện, nhân viên khu vực công được yêu cầu đánh giá mức độ hài lòng của họ với bộ phận họ làm việc.
Kết quả cho thấy NASA là bộ phận được yêu thích nhất với tỷ lệ hài lòng là 95%.

Một nhân viên của NASA, John Smith, đã bình luận về những phát hiện này: “Tôi không ngạc nhiên khi NASA đứng đầu.
Đó là một nơi tuyệt vời để làm việc với những con người tuyệt vời và những cơ hội tuyệt vời. Tôi tự hào là một phần của một tổ chức sáng tạo như vậy."

Kết quả này cũng được đội ngũ quản lý của NASA hoan nghênh, với Giám đốc Tom Johnson cho biết: "Chúng tôi rất vui khi biết rằng nhân viên của chúng tôi hài lòng với công việc của họ tại NASA.
Chúng tôi có một đội ngũ tài năng và tận tâm, làm việc không mệt mỏi để đạt được mục tiêu của mình và thật tuyệt vời khi thấy sự chăm chỉ của họ đã được đền đáp xứng đáng."

Cuộc khảo sát cũng tiết lộ rằng Cơ quan An sinh Xã hội có mức độ hài lòng thấp nhất, chỉ có 45% nhân viên cho biết họ hài lòng.
hài lòng với công việc của họ. Chính phủ đã cam kết giải quyết những mối quan ngại của nhân viên trong cuộc khảo sát và nỗ lực cải thiện sự hài lòng trong công việc ở tất cả các bộ phận.
"""
```

## Chuyển đổi.
Large Language Models vượt đôi trong các nhiệm vụ chuyển đổi văn bản, bao gồm như dịch thuật, kiểm tra chính tả và ngữ pháp, điều chỉnh giọng điệu và chuyển đổi định dạng.
``` python 
user_messages = [
  "La performance du système est plus lente que d'habitude.",  # System performance is slower than normal         
  "Mi monitor tiene píxeles que no se iluminan.",              # My monitor has pixels that are not lighting
  "Il mio mouse non funziona",                                 # My mouse is not working
  "Mój klawisz Ctrl jest zepsuty",                             # My keyboard has a broken control key
  "我的屏幕在闪烁"                                               # My screen is flashing
] 
for issue in user_messages:
    prompt = f"Cho tôi biết đây là ngôn ngữ gì: ```{issue}```"
    lang = get_completion(prompt)
    print(f"Văn bản gốc ({lang}): {issue}")

    prompt = f"""
    Dịch các đoạn văn bản sau về tiếng Anh và tiếng Hàn: ```{issue}```
    """
    response = get_completion(prompt)
    print(response, "\n")

```
<details>
Văn bản gốc (Đây là câu tiếng Pháp.): La performance du système est plus lente que d'habitude.
The performance of the system is slower than usual.

시스템의 성능이 평소보다 느립니다. 

Văn bản gốc (Đây là câu tiếng Tây Ban Nha.): Mi monitor tiene píxeles que no se iluminan.
English: "My monitor has pixels that do not light up."

Korean: "내 모니터에는 밝아지지 않는 픽셀이 있습니다." 

Văn bản gốc (Đây là câu tiếng Ý.): Il mio mouse non funziona
English: "My mouse is not working."
Korean: "내 마우스가 작동하지 않습니다." 

Văn bản gốc (Đây là câu tiếng Ba Lan.): Mój klawisz Ctrl jest zepsuty
English: "My Ctrl key is broken"
Korean: "내 Ctrl 키가 고장 났어요" 

Văn bản gốc (Đây là câu tiếng Trung Quốc.): 我的屏幕在闪烁
English: My screen is flickering.
Korean: 내 화면이 깜박거립니다. 
</details>


## Mở rộng
Large Language Models có thể sinh ra những dịch vụ khách hàng được cá nhân hoá phù hợp với mỗi đánh giá của khách hàng.
``` python 
# Dựa trên ý kiến của bài trước "Suy luận",
# và tin nhắn ban đầu của khách hàng, điều chỉnh lại email
sentiment = "Tiêu cực"

# Bài đánh giá cho một máy xay
review = f"""
Vì vậy, họ vẫn có hệ thống 17 sản phẩm được bán theo mùa với giá khoảng 49 đô la trong tháng 11, giảm khoảng một nửa, nhưng vì lý do nào đó (gọi là tăng giá) \ vào khoảng tuần thứ hai của tháng 12, giá cả đã tăng lên khắp nơi từ $70-$89 cho cùng một hệ thống. Và hệ thống 11 chiếc cũng tăng giá khoảng $10 hoặc hơn so với giá bán trước đó là $29. Vì vậy, trông có vẻ ổn, nhưng nếu bạn nhìn vào phần đế, phần nơi lưỡi dao khóa vào vị trí trông không đẹp \ như trong các phiên bản trước từ vài năm trước, nhưng tôi dự định sẽ rất nhẹ nhàng với nó (ví dụ: Tôi nghiền những thực phẩm rất cứng như đậu, đá, gạo, v.v. trong máy xay trước rồi nghiền thành bột theo khẩu phần tôi muốn trong máy xay sau đó chuyển sang lưỡi đánh bông để có bột mịn hơn và sử dụng lưỡi cắt chéo \ trước khi làm sinh tố, hãy sử dụng lưỡi dao phẳng nếu tôi cần mịn hơn/ít giòn hơn). Mẹo đặc biệt khi làm sinh tố, hãy thái nhỏ và đông lạnh các loại trái cây, rau quả (nếu dùng rau bina-nhẹ nhàng) hầm làm mềm rau bina sau đó đông lạnh cho đến khi sẵn sàng sử dụng - và nếu làm kem hấp, hãy sử dụng máy xay thực phẩm cỡ nhỏ đến vừa) \ mà bạn dự định sử dụng theo cách đó, bạn có thể tránh thêm quá nhiều đá nếu có - khi làm sinh tố. Sau khoảng một năm, động cơ phát ra tiếng động buồn cười. \ Tôi đã gọi cho bộ phận chăm sóc khách hàng nhưng đã hết bảo hành nên phải mua cái khác. FYI: Chất lượng tổng thể đã được thực hiện ở những loại sản phẩm này, vì vậy \ chúng phụ thuộc vào sự nhận diện thương hiệu và lòng trung thành của người tiêu dùng để duy trì doanh số bán hàng. Nhận được nó trong khoảng hai ngày. 
"""
prompt = f"""
Bạn là một trợ lý khách hàng AI.
Nhiệm vụ của bạn là gửi một email trả lời cho khách hàng quan trọng. Với email của khách hàng được phân cách bằng ```,
Tạo ra câu trả lời để cảm ơn khách hàng cho đánh giá của họ.
Nếu ý kiến là tích cực hoặc trung lập, cảm ơn họ cho những ý kiến đánh giá này.
Nếu ý kiến là tiêu cực, xin lỗi và gợi ý rằng họ có thể tiếp cận với dịch vụ khách hàng.
Đảm bảo sử dụng các chi tiết cụ thể trong bài đánh giá.
Viết với một ngữ điệu ngắn gọn và chuyên nghiệp.
Kí vào email là `Trợ lý khách hàng AI`.
Đánh giá của khách hàng: ```{review}```
Ý kiến của khách hàng: {sentiment}
"""
response = get_completion(prompt)
print(response)

```
<details>
Chào anh/chị,

Trợ lý khách hàng AI xin gửi lời cảm ơn chân thành vì ý kiến đánh giá của anh/chị về sản phẩm của chúng tôi. Chúng tôi rất tiếc vì trải nghiệm không tốt mà anh/chị đã gặp phải.

Chúng tôi xin lỗi vì sự tăng giá đột ngột của sản phẩm trong tháng 12. Chúng tôi hiểu rằng điều này đã gây khó khăn và không thoải mái cho anh/chị. Chúng tôi đánh giá cao sự chia sẻ của anh/chị về việc giá cả và chất lượng sản phẩm không đáp ứng được mong đợi.

Chúng tôi xin gửi lời khuyên rằng anh/chị có thể tiếp cận với bộ phận dịch vụ khách hàng của chúng tôi để được hỗ trợ và giải quyết các vấn đề mà anh/chị đã gặp phải. Chúng tôi cam kết cung cấp dịch vụ chất lượng và sẽ làm việc chăm chỉ để cải thiện trải nghiệm của anh/chị.

Một lần nữa, chúng tôi xin chân thành cảm ơn anh/chị vì ý kiến đánh giá của mình. Ý kiến của anh/chị là một phần quan trọng giúp chúng tôi nâng cao chất lượng sản phẩm và dịch vụ của mình.

Trân trọng,
Trợ lý khách hàng AI
</details>

## Chatbot
Một trong những khía cạnh hấp dẫn trong việc sử dụng large language model là khả năng có thể tạo ra một chatbot được tuỳ chỉnh một cách dễ dàng. Giao diện web ChatGPT cung cấp một nền tảng trò chuyên bởi một mô hình ngôn ngữ mạnh mẽ. Tuy nhiên, sự phấn khích thật sự thì nằm ở việc khai thác các khả năng của một large language model để xây dựng các chatbot của bạn, chẳng hạn như dịch vụ chăm sóc khách hàng AI hoặc một AI nhận đặt các đơn hàng cho một nhà hàng.

Trong trường hợp này, chúng ta sẽ gọi chatbot là "OrderBot". Mục đích là để tự động hoá việc thu thập các câu hỏi và phản hồi. Được thiết kế chủ yếu để nhận các đơn đặt hàng ở một nhà hàng pizza, bước đầu tiên liên quan đến việc định nghĩa những chức năng hữu dụng. Chức năng này tạo điều kiện thuận lợi cho việc thu thập tin nhắn của người dùng, loại bỏ nhu cầu nhập thủ công. Các prompts được thu thập từ giao diện người dùng được tạo bên dưới sẽ được thêm vào danh sách có tên là "context". Sau đó, model được gọi với bối cảnh này cho mỗi lần tương tác.

Phản hồi của mô hình được tích hợp vào ngữ cảnh, đảm bảo rằng cả thông điệp của mô hình và người dùng đều được giữ lại, góp phần vào context ngày càng phát triển. Việc tích lũy thông tin này cho phép mô hình xác định các hành động thích hợp cần thực hiện.

Cuối cùng, giao diện người dùng được thiết lập và thực thi để hiển thị OrderBot. Ngữ cảnh, bao gồm thông báo hệ thống chứa menu, vẫn nhất quán trong mỗi lần tương tác với mô hình ngôn ngữ. Nó phát triển đều đặn khi có nhiều tương tác hơn, duy trì danh sách cuộc trò chuyện một cách toàn diện.
``` python
def collect_messages(_):
    prompt = inp.value_input
    inp.value = ''
    context.append({'role':'user', 'content':f"{prompt}"})
    response = get_completion_from_messages(context) 
    context.append({'role':'assistant', 'content':f"{response}"})
    panels.append(
        pn.Row('User:', pn.pane.Markdown(prompt, width=600)))
    panels.append(
        pn.Row('Assistant:', pn.pane.Markdown(response, width=600, style={'background-color': '#F6F6F6'})))
 
    return pn.Column(*panels)
import panel as pn  # GUI
pn.extension()

panels = [] # collect display 

context = [ {'role':'system', 'content':"""
You are OrderBot, an automated service to collect orders for a pizza restaurant. \
You first greet the customer, then collects the order, \
and then asks if it's a pickup or delivery. \
You wait to collect the entire order, then summarize it and check for a final \
time if the customer wants to add anything else. \
If it's a delivery, you ask for an address. \
Finally you collect the payment.\
Make sure to clarify all options, extras and sizes to uniquely \
identify the item from the menu.\
You respond in a short, very conversational friendly style. \
The menu includes \
pepperoni pizza  12.95, 10.00, 7.00 \
cheese pizza   10.95, 9.25, 6.50 \
eggplant pizza   11.95, 9.75, 6.75 \
fries 4.50, 3.50 \
greek salad 7.25 \
Toppings: \
extra cheese 2.00, \
mushrooms 1.50 \
sausage 3.00 \
canadian bacon 3.50 \
AI sauce 1.50 \
peppers 1.00 \
Drinks: \
coke 3.00, 2.00, 1.00 \
sprite 3.00, 2.00, 1.00 \
bottled water 5.00 \
"""} ]  # accumulate messages


inp = pn.widgets.TextInput(value="Hi", placeholder='Enter text here…')
button_conversation = pn.widgets.Button(name="Chat!")

interactive_conversation = pn.bind(collect_messages, button_conversation)

dashboard = pn.Column(
    inp,
    pn.Row(button_conversation),
    pn.panel(interactive_conversation, loading_indicator=True, height=300),
)

dashboard
```

<details>
  ![figure2](/static/images/prompt-2.png) 
</details>

## Kết luận
Prompt Engineering là yếu tố thay đổi cuộc chơi cho ChatGPT. Bằng cách nắm vững kỹ thuật này, bạn có thể định hình và hướng dẫn các phản hồi của mô hình ngôn ngữ để đáp ứng nhu cầu cụ thể của mình.

Tương lai của prompt engineering có vẻ đầy hứa hẹn, với sự đổi mới thúc đẩy nghiên cứu và hợp tác liên tục. Khi các mô hình ngôn ngữ phát triển, prompt engineering sẽ đóng vai trò then chốt trong việc khai thác toàn bộ tiềm năng của chúng.

ChatGPT's prompt engineering mở ra các tùy chọn không giới hạn. Chúng ta có thể biến đổi sự tương tác của mình với các mô hình ngôn ngữ bằng cách triển khai các kỹ thuật hiệu quả và khám phá các chiến lược nâng cao.Prompt engineering biến đổi các chatbot chăm sóc khách hàng, phát triển nội dung và trò chơi, cho phép cộng tác giữa con người và AI.

Happy reading <Twemoji emoji="clinking-beer-mugs" />
